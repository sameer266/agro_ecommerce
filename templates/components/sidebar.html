<!-- Sidebar Content -->
<div class="px-4 py-6">
  
  <!-- Sidebar Header -->
  <div class="mb-6 pb-4 border-b border-gray-200">
    <div class="flex items-center gap-3 px-2">
      <div class="w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center">
        <i class="fas fa-seedling text-xl text-primary"></i>
      </div>
      <div>
        <h3 class="text-gray-900 font-semibold text-base">Agro Admin</h3>
        <p class="text-gray-500 text-xs">Management Panel</p>
      </div>
    </div>
  </div>

  <!-- Navigation Menu -->
  <nav class="space-y-1">
    
    <!-- Dashboard -->
    <a href="{% url 'admin_dashboard_page'%}" class="sidebar-link">
      <i class="fas fa-home"></i>
      <span>Dashboard</span>
    </a>

    <!-- Orders -->
    <div class="mb-1">
      <button class="sidebar-link dropdown-toggle w-full" data-dropdown="orders">
        <i class="fas fa-shopping-cart"></i>
        <span class="flex-1 text-left">Orders</span>
        <span class="text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded-full font-medium">12</span>
        <i class="fas fa-chevron-down text-xs dropdown-icon"></i>
      </button>
      <div class="dropdown-menu ml-8 mt-1 space-y-1" style="max-height: 0;">
        <a href="{% url 'admin_order_list_page'%}" class="sidebar-link text-sm py-2">
          <i class="fas fa-list"></i>
          <span>All Orders</span>
        </a>
        <a href="{% url 'admin_order_pending_page'%}" class="sidebar-link text-sm py-2">
          <i class="fas fa-clock"></i>
          <span>Pending</span>
          <span class="ml-auto text-xs bg-yellow-100 text-yellow-700 px-2 py-0.5 rounded-full">5</span>
        </a>
   
        <a href="{% url 'admin_order_delivered_page'%}" class="sidebar-link text-sm py-2">
          <i class="fas fa-check-circle"></i>
          <span>Delivered</span>
        </a>
      </div>
    </div>

    <!-- Farmers -->
    <div class="mb-1">
      <button class="sidebar-link dropdown-toggle w-full" data-dropdown="farmers">
        <i class="fas fa-tractor"></i>
        <span class="flex-1 text-left">Farmers</span>
        <i class="fas fa-chevron-down text-xs dropdown-icon"></i>
      </button>
      <div class="dropdown-menu ml-8 mt-1 space-y-1" style="max-height: 0;">
        <a href="{% url 'admin_farmer_list_page'%}" class="sidebar-link text-sm py-2">
          <i class="fas fa-list"></i>
          <span>All Farmers</span>
        </a>
        <a href="{% url 'admin_farmer_kyc_pending_page'%}" class="sidebar-link text-sm py-2">
          <i class="fas fa-user-check"></i>
          <span>Kyc Pending</span>
          <span class="ml-auto text-xs bg-orange-100 text-orange-700 px-2 py-0.5 rounded-full">12</span>
        </a>
      
        <a href="{% url 'admin_farmer_payout_requests_page' %}" class="sidebar-link text-sm py-2">
          <i class="fas fa-money-bill-wave"></i>
          <span>Payouts Requests</span>
            <span class="ml-auto text-xs bg-orange-100 text-orange-700 px-2 py-0.5 rounded-full">12</span>
        </a>
      </div>
    </div>

    <!-- Vendors -->
    <div class="mb-1">
      <button class="sidebar-link dropdown-toggle w-full" data-dropdown="vendors">
        <i class="fas fa-store"></i>
        <span class="flex-1 text-left">Vendors</span>
        <i class="fas fa-chevron-down text-xs dropdown-icon"></i>
      </button>
      <div class="dropdown-menu ml-8 mt-1 space-y-1" style="max-height: 0;">
        <a href="{% url 'admin_vendor_list_page'%}" class="sidebar-link text-sm py-2">
          <i class="fas fa-list"></i>
          <span>All Vendors</span>
        </a>
        <a href="" class="sidebar-link text-sm py-2">
          <i class="fas fa-user-check"></i>
          <span>Kyc Pending</span>
          <span class="ml-auto text-xs bg-orange-100 text-orange-700 px-2 py-0.5 rounded-full">8</span>
        </a>
        <a href="" class="sidebar-link text-sm py-2">
          <i class="fas fa-box"></i>
          <span>Products</span>
        </a>
        <a href="" class="sidebar-link text-sm py-2">
          <i class="fas fa-money-bill-wave"></i>
          <span>Payouts</span>
        </a>
      </div>
    </div>

    <!-- Products -->
    <div class="mb-1">
      <button class="sidebar-link dropdown-toggle w-full" data-dropdown="products">
        <i class="fas fa-leaf"></i>
        <span class="flex-1 text-left">Products</span>
        <i class="fas fa-chevron-down text-xs dropdown-icon"></i>
      </button>
      <div class="dropdown-menu ml-8 mt-1 space-y-1" style="max-height: 0;">
        <a href="" class="sidebar-link text-sm py-2">
          <i class="fas fa-warehouse"></i>
          <span>Farmer Products</span>
        </a>
        <a href="" class="sidebar-link text-sm py-2">
          <i class="fas fa-store-alt"></i>
          <span>Vendor Products</span>
        </a>
        <a href="" class="sidebar-link text-sm py-2">
          <i class="fas fa-tags"></i>
          <span>Categories</span>
        </a>
      </div>
    </div>

    <!-- Customers -->
    <a href="" class="sidebar-link">
      <i class="fas fa-users"></i>
      <span>Customers</span>
    </a>

    <!-- Reviews -->
    <a href="" class="sidebar-link">
      <i class="fas fa-star"></i>
      <span>Reviews & Ratings</span>
    </a>

    <!-- Divider -->
    <div class="my-4 border-t border-gray-200"></div>

    <!-- Wallets & Payouts -->
    <div class="mb-1">
      <button class="sidebar-link dropdown-toggle w-full" data-dropdown="finance">
        <i class="fas fa-wallet"></i>
        <span class="flex-1 text-left">Finance</span>
        <i class="fas fa-chevron-down text-xs dropdown-icon"></i>
      </button>
      <div class="dropdown-menu ml-8 mt-1 space-y-1" style="max-height: 0;">
        <a href="" class="sidebar-link text-sm py-2">
          <i class="fas fa-university"></i>
          <span>Admin Wallet</span>
        </a>
        <a href="" class="sidebar-link text-sm py-2">
          <i class="fas fa-percentage"></i>
          <span>Commission Rate</span>
        </a>
        <a href="" class="sidebar-link text-sm py-2">
          <i class="fas fa-hand-holding-usd"></i>
          <span>Payout Requests</span>
          <span class="ml-auto text-xs bg-yellow-100 text-yellow-700 px-2 py-0.5 rounded-full">5</span>
        </a>
      </div>
    </div>

    <!-- Notifications -->
    <a href="" class="sidebar-link">
      <i class="fas fa-bell"></i>
      <span>Notifications</span>
      <span class="ml-auto text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded-full font-medium">8</span>
    </a>

    <!-- Audit Logs -->
    <a href="" class="sidebar-link">
      <i class="fas fa-clipboard-list"></i>
      <span>Activity Logs</span>
    </a>

    <!-- Organization -->
    <a href="" class="sidebar-link">
      <i class="fas fa-building"></i>
      <span>Organization</span>
    </a>

    <!-- Divider -->
    <div class="my-4 border-t border-gray-200"></div>

    <!-- Settings -->
    <a href="" class="sidebar-link">
      <i class="fas fa-cog"></i>
      <span>Settings</span>
    </a>

  </nav>

</div>

<!-- Dropdown Toggle Script -->
<script>
$(document).ready(function() {
  // Dropdown toggle functionality
  $('.dropdown-toggle').on('click', function(e) {
    e.preventDefault();
    
    const dropdown = $(this).next('.dropdown-menu');
    const icon = $(this).find('.dropdown-icon');
    
    // Toggle current dropdown with smooth animation
    if (dropdown.css('max-height') === '0px') {
      dropdown.css('max-height', dropdown[0].scrollHeight + 'px');
      icon.addClass('rotate-180');
    } else {
      dropdown.css('max-height', '0px');
      icon.removeClass('rotate-180');
    }
  });

  // Highlight active link based on current URL path
  const currentPath = window.location.pathname;
  $('.sidebar-link').each(function() {
    const href = $(this).attr('href');
    if (href && (href === currentPath || (currentPath.startsWith(href) && href !== '/'))) {
      $(this).addClass('active');
      
      // If it's inside a dropdown, open the dropdown
      if ($(this).closest('.dropdown-menu').length) {
        const dropdown = $(this).closest('.dropdown-menu');
        dropdown.css('max-height', dropdown[0].scrollHeight + 'px');
        dropdown.prev('.dropdown-toggle').find('.dropdown-icon').addClass('rotate-180');
      }
    }
  });

  // Close sidebar on mobile when clicking a link
  $('.sidebar-link').on('click', function(e) {
    // Don't close if it's a dropdown toggle
    if (!$(this).hasClass('dropdown-toggle')) {
      if ($(window).width() < 768) {
        $('#sidebar').removeClass('active');
        $('#overlay').removeClass('active');
      }
    }
  });
});
</script>

<style>
/* Dropdown animation */
.dropdown-menu {
  overflow: hidden;
  transition: max-height 0.3s ease;
}

.dropdown-icon {
  transition: transform 0.2s ease;
}

.rotate-180 {
  transform: rotate(180deg);
}
</style>